# Репозиторий shrkga_microservices
Описание выполненных домашних заданий.

## ДЗ #13. Docker контейнеры. Docker под капотом
Выполнены все основные и дополнительные пункты ДЗ

#### Основное задание
- Установлены Docker, docker-compose, docker-machine;
- Запущен контейнер `hello-world`;
- Изучены и выполнены основные команды docker;

#### Задание со ⭐: сравнение docker inspect контейнера и образа
- На основе вывода команд описаны отличия контейнера от образа в файле `dockermonolith/docker-1.log`;

#### Docker-контейнеры
- Установлен и инициализирован Yandex Cloud CLI;
- Создан инстанс в YC;
- Инициализировано окружение Docker через `docker-machine`;
- Повторена практика из демо на лекции;
- Создана требуемая структура репозитория;
- Выполнена сборка образа `reddit:latest`;
- На инстансе в YC запущен контейнер `reddit`;
- По ссылке http://<ваш_IP_адрес>:9292 успешно открылось приложение;
- Выполнена регистрация в Docker Hub;
- Выполнена docker аутентификация на Docker Hub;
- Созданный образ загружен на Docker Hub с тэгом `shrkga/otus-reddit:1.0`;
- Выполнена проверка запуска контейнера в локальном докере на другом хосте;
- Выполнены все дополнительные проверки, указанные в ДЗ;

#### Задание со ⭐: автоматизация поднятие нескольких инстансов в Yandex Cloud, установка на них докера и запуск там образа shrkga/otus-reddit:1.0
- Задача реализована в виде прототипа в директории `/docker-monolith/infra/`;
- Создан шаблон Packer, который делает образ с уже установленным Docker;
    - Используется провеженер `ansible`, для установки докера и модуля python написан плейбук `ansible/playbooks/packer_docker.yml`;
    - Данный плейбук может использоваться для развертывания с помощью ansible, если необходимо сделать это не при помощи packer;
- Инстансы поднимаются с помощью Terraform, их количество задается переменной;
    - Развертывание инстансов реализовано через модуль `terraform/modules/docker`;
- Написаны несколько плейбуков Ansible с использованием динамического инвентори для установки докера и запуска там образа приложения;
- Приложение успешно поднимается на инстансах и доступно по адресу http://<IP_адрес_инстанса>:9292 
